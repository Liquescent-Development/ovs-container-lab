# VM Images Directory

This directory contains **runtime-generated VM disk images** for the OVS Container Lab.

## ⚠️ Important: DO NOT Commit VM Images

VM disk images (`.qcow2`, `.iso`, `.img` files) are **NOT tracked in git** because:
- They are large binary files (500MB - 1GB each)
- They bloat the git repository
- They are dynamically generated by the VM manager

## How VM Images Are Created

When you run `make vpc-vms`, the VM manager automatically:

1. **Downloads base images** (if needed) - Ubuntu 24.04 cloud image
2. **Creates VM-specific disks** - One for each VM (vpc-a-vm, vpc-b-vm)
3. **Generates cloud-init ISOs** - Contains network configuration and SSH keys

## Files in This Directory

After running VMs, you'll see:

```
vm-manager/images/
├── ubuntu-base.qcow2          # Base Ubuntu image (downloaded)
├── vpc-a-vm.qcow2             # VPC-A VM disk (generated)
├── vpc-a-vm-cloud-init.iso    # VPC-A cloud-init (generated)
├── vpc-b-vm.qcow2             # VPC-B VM disk (generated)
└── vpc-b-vm-cloud-init.iso    # VPC-B cloud-init (generated)
```

## Cleanup

To remove all generated VM images:

```bash
make vpc-vms-destroy
rm -f vm-manager/images/*.qcow2 vm-manager/images/*.iso
```

## Base Image Download

The Ubuntu base image is automatically downloaded from:
- ARM64: `https://cloud-images.ubuntu.com/releases/24.04/release/ubuntu-24.04-server-cloudimg-arm64.img`
- AMD64: `https://cloud-images.ubuntu.com/releases/24.04/release/ubuntu-24.04-server-cloudimg-amd64.img`

It's cached in `.downloads/vm-images/` on the host and copied into the Lima VM as needed.

## Why These Aren't in Git

Including VM images in git would:
- ❌ Make the repository >2GB
- ❌ Slow down clone/fetch operations
- ❌ Waste GitHub storage/bandwidth
- ❌ Cause merge conflicts on binary files

Instead, they are **generated on-demand** when you create VMs.