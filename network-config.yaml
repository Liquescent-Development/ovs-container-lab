# Simple single-host configuration for testing
# This configuration uses persistent MACs that will survive container restarts

global:
  encapsulation: geneve
  mtu: 1400

# Single host setup (Lima VM)
hosts:
  lima-host:
    chassis_name: chassis-host
    management_ip: 192.168.100.1
    tunnel_ip: 192.168.100.1
    location: local
    zone: local
    type: lima-vm
    roles:
      - ovn-central
      - ovn-controller
      - gateway

# No clustering for single host - minimal structure for compatibility
ovn_cluster:
  northbound:
    nodes: []
  southbound:
    nodes: []
  nb_connection: "tcp:127.0.0.1:6641"
  sb_connection: "tcp:127.0.0.1:6642"

# VPC definitions
vpcs:
  vpc-a:
    tenant: tenant-1
    cidr: 10.0.0.0/16
    spanning_hosts: [lima-host]
    router:
      name: lr-vpc-a
      mac: "00:00:00:01:00:00"
    switches:
      - name: ls-vpc-a-web
        cidr: 10.0.1.0/24
        tier: web
      - name: ls-vpc-a-app
        cidr: 10.0.2.0/24
        tier: app
      - name: ls-vpc-a-db
        cidr: 10.0.3.0/24
        tier: db
      - name: ls-vpc-a-test
        cidr: 10.0.4.0/24
        tier: test

  vpc-b:
    tenant: tenant-2
    cidr: 10.1.0.0/16
    spanning_hosts: [lima-host]
    router:
      name: lr-vpc-b
      mac: "00:00:00:02:00:00"
    switches:
      - name: ls-vpc-b-web
        cidr: 10.1.1.0/24
        tier: web
      - name: ls-vpc-b-app
        cidr: 10.1.2.0/24
        tier: app
      - name: ls-vpc-b-db
        cidr: 10.1.3.0/24
        tier: db
      - name: ls-vpc-b-test
        cidr: 10.1.4.0/24
        tier: test

transit:
  cidr: 192.168.100.0/24
  gateway_router:
    name: lr-gateway
    mac: "00:00:00:00:00:01"

# Containers with PERSISTENT MACs
containers:
  # VPC-A containers
  vpc-a-web:
    host: lima-host
    vpc: vpc-a
    switch: ls-vpc-a-web
    ip: 10.0.1.10
    mac: "02:00:00:01:01:0a"  # Persistent MAC
    tier: web

  vpc-a-app:
    host: lima-host
    vpc: vpc-a
    switch: ls-vpc-a-app
    ip: 10.0.2.10
    mac: "02:00:00:01:02:0a"  # Persistent MAC
    tier: app

  vpc-a-db:
    host: lima-host
    vpc: vpc-a
    switch: ls-vpc-a-db
    ip: 10.0.3.10
    mac: "02:00:00:01:03:0a"  # Persistent MAC
    tier: db

  traffic-gen-a:
    host: lima-host
    vpc: vpc-a
    switch: ls-vpc-a-test
    ip: 10.0.4.10
    mac: "02:00:00:01:04:0a"  # Persistent MAC
    tier: test
    type: traffic-generator

  # VPC-B containers
  vpc-b-web:
    host: lima-host
    vpc: vpc-b
    switch: ls-vpc-b-web
    ip: 10.1.1.10
    mac: "02:00:00:02:01:0a"  # Persistent MAC
    tier: web

  vpc-b-app:
    host: lima-host
    vpc: vpc-b
    switch: ls-vpc-b-app
    ip: 10.1.2.10
    mac: "02:00:00:02:02:0a"  # Persistent MAC
    tier: app

  vpc-b-db:
    host: lima-host
    vpc: vpc-b
    switch: ls-vpc-b-db
    ip: 10.1.3.10
    mac: "02:00:00:02:03:0a"  # Persistent MAC
    tier: db

  traffic-gen-b:
    host: lima-host
    vpc: vpc-b
    switch: ls-vpc-b-test
    ip: 10.1.4.10
    mac: "02:00:00:02:04:0a"  # Persistent MAC
    tier: test
    type: traffic-generator

  nat-gateway:
    host: lima-host
    vpc: transit
    switch: ls-transit
    ip: 192.168.100.254
    mac: "02:00:00:00:00:fe"  # Persistent MAC
    type: nat-gateway

veth_naming:
  strategy: custom
  custom_names:
    traffic-gen-a: veth-tg-a
    traffic-gen-b: veth-tg-b